# Техническое задание (ТЗ)

## Сервис аналитики покупки/продажи скинов CS2

> ⚠️ Важно: API-ключи не включены в документ. Использовать переменные
> окружения (.env / secret storage).

------------------------------------------------------------------------

# 1. Цель проекта

Разработать веб‑сервис аналитики торговли скинами CS2 с интеграцией: -
CSFloat --- покупки и трейды - Market.CSGO --- продажи и курс вывода

Сервис должен показывать единую панель аналитики и считать прибыль.

------------------------------------------------------------------------

# 2. Источники данных

## 2.1 CSFloat

Источники: - /stall/me --- товары в продаже - /profile/trades ---
текущие трейды

Собирать: - id предмета - название - wear - float value - цена -
статус - timestamps

## 2.2 Market.CSGO

Источники: - /ru/usercab/trades/active --- активные продажи -
/ru/usercab/balance/withdrawing --- курс вывода

Собирать: - id продажи - название - float (если есть) - цена продажи -
статус - курс USDT→RUB - timestamp курса

------------------------------------------------------------------------

# 3. Бизнес-логика

## 3.1 Периоды

Переключатели: - Неделя - Месяц - 3 месяца - Кастомный диапазон

## 3.2 Inventory Value

Состав: - купленные предметы из CSFloat - активные продажи Market.CSGO

Дедупликация: 1. asset id 2. name + float

## 3.3 Purchases

Spent = сумма buy_price.

## 3.4 Sales

Sales Volume = сумма sell_price. Комиссия = 6%.

## 3.5 Profit

NetSell = sell_price \* (1 - 0.06) Profit = NetSell - buy_price Profit%
= Profit / buy_price \* 100

------------------------------------------------------------------------

# 4. UI

## Верхняя панель

-   Переключатель Market.CSGO / CSFloat / All
-   Выбор периода

## Карточки

-   Inventory Value
-   Purchases
-   Sales
-   Profit
-   Курс USDT→RUB

## Вкладки

-   Общая стата
-   Покупки CSFloat
-   Продажи Market.CSGO

------------------------------------------------------------------------

# 5. Архитектура

Frontend: - Next.js + TypeScript

Backend: - Node.js (NestJS) или Python (FastAPI)

DB: - PostgreSQL

Queue: - Redis + BullMQ

------------------------------------------------------------------------

# 6. Модули

-   Collector CSFloat
-   Collector Market.CSGO
-   Normalizer
-   Matcher
-   Analytics
-   Web UI

------------------------------------------------------------------------

# 7. Модель данных

## items

-   id
-   platform_source
-   name
-   wear
-   float_value

## listings

-   listing_id
-   price
-   status

## trades

-   trade_id
-   status

## fx_rates

-   pair
-   rate

------------------------------------------------------------------------

# 8. Синхронизация

-   CSFloat stall --- 2-5 минут
-   CSFloat trades --- 1-2 минуты
-   Market trades --- 1-2 минуты
-   withdrawing rate --- 10-30 минут

------------------------------------------------------------------------

# 9. Acceptance Criteria

-   Данные подтягиваются из обеих площадок
-   Inventory не дублируется
-   Profit считается корректно
-   Курс USDT отображается

------------------------------------------------------------------------

# 10. Безопасность

-   API ключи хранить только в env
-   Маскировать токены в логах
